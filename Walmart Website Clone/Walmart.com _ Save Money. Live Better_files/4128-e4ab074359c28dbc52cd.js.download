"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4128],{27596:function(e,n,a){a.d(n,{G:function(){return i}});var s=a(76714);const i=(...e)=>{const{getGqlFetch:n}=(0,s.Z)();return n(...e)}},4128:function(e,n,a){a.d(n,{Xq:function(){return I},OC:function(){return k},vs:function(){return w},pS:function(){return y},jc:function(){return L},LM:function(){return P}});var s=a(30567),i=a(59240),r=a(98198),l=a(47103),t=a(37121),c=a(52406),o=a(22963),d=a(44135),m=a(94358),u=a.n(m);const f=({value:e,isListLayout:n})=>{const{isMobile:a}=(0,d.vP)(),i=a?{maxWidth:160}:{},r="string"===typeof e?[e]:e;return(0,s.jsx)("div",{className:u()("mt2",{mb2:!n,mb3:n}),style:i,children:r.map(((e,n)=>(0,s.jsx)(o.V,{className:"mr1 mt1 ph1",variant:"tertiary",children:e},e+"-"+n)))})};const h=({value:e})=>(0,s.jsx)("div",{className:"sans-serif gray f7 f6-l pb2 mt3",children:e});const x=({value:e})=>(0,s.jsx)("div",{className:"mt2",children:(0,s.jsx)(o.V,{color:"gray",variant:"secondary",children:e})});var v=a(45940);const g=({averageRating:e,numberOfReviews:n})=>(0,s.jsxs)("div",{className:"mt2 flex items-center",children:[(0,s.jsx)(v.Z,{value:e,className:"mr1"}),(0,s.jsx)("span",{className:"sans-serif gray f7","aria-hidden":"true",children:n}),(0,s.jsx)(i.T,{children:e+" out of 5 Stars. "+(n?n+" reviews":"")})]});var j=a(84016),b=a(48098),p=a(10856);const N=({value:e})=>{const{isMobile:n}=(0,d.vP)();return(0,s.jsxs)("div",{className:"mv2 flex items-center",children:[(0,s.jsx)("div",{className:"f7 mr1 blue b lh-copy",children:e}),(0,s.jsx)(p.Z,{className:"pr2 flex",src:"//i5.walmartimages.com/dfw/63fd9f59-ac39/29c6759d-7f14-49fa-bd3a-b870eb4fb8fb/v1/wplus-icon-blue.svg",alt:"Walmart Plus",preload:!1,height:n?17:20,width:20})]})};const w=({isListLayout:e=!1})=>{var n,a,i,r,l,t;const{item:c}=(0,b.A)(),o=c.esrb||c.mediaRating,d=c.fulfillmentBadges&&c.fulfillmentBadges.length>0?c.fulfillmentBadges:c.fulfillmentBadge||"",m=null!=(n=null==(a=c.fulfillmentIcon)?void 0:a.label)?n:"",u=c.availabilityMessage?c.availabilityMessage:c.isOutOfStock?"Out of stock":"";return(0,s.jsxs)(s.Fragment,{children:[Boolean(null==c||null==(i=c.rating)?void 0:i.averageRating)&&(0,s.jsx)(g,{averageRating:null==(r=c.rating)?void 0:r.averageRating,numberOfReviews:null==(l=c.rating)?void 0:l.numberOfReviews}),(null==c||null==(t=c.reward)?void 0:t.offer)&&(0,s.jsx)(j.Vt,{offerId:c.reward.offerId,offer:c.reward.offer,state:c.reward.state,selectionToken:c.reward.selectionToken,restriction:c.reward.restriction}),m&&!c.isOutOfStock&&(0,s.jsx)(N,{value:m}),d&&!u&&(0,s.jsx)(f,{value:d,className:"mt2",isListLayout:e}),(0,s.jsx)(I,{}),u&&(0,s.jsx)(h,{value:u}),o&&(0,s.jsx)(x,{value:o})]})},y=({className:e="absolute bottom--1 z-2 left--2",children:n})=>{const{item:a}=(0,b.A)();return a.canAddToCart||a.showOptions||a.showBuyNow?(0,s.jsx)("div",{className:e,children:n}):null},k=({children:e})=>(0,s.jsx)("div",{className:"flex justify-center mv2",children:(0,s.jsx)("div",{className:"relative",children:e})}),L=({children:e,onLinkExtras:n,queryStringExtras:a})=>{const{item:r,productAnalytics:l,catalogSellerId:c,index:o}=(0,b.A)();let d,m;if(null!=r&&r.externalInfoUrl)d=null==r?void 0:r.externalInfoUrl,m=d;else{const e={...c&&{selectedSellerId:c},...a},n=Object.entries(e).map((([e,n])=>e+"="+n)).join("&"),s=r.hasOwnProperty("canonicalUrl")&&r.canonicalUrl?""+r.canonicalUrl:"/ip/seort/"+(r.usItemId||r.id),i=n&&(s.includes("?")?"&":"?");m=""+s+i+n}const u=r.usItemId||r.id;return(0,s.jsx)(t.ZP,{className:"absolute w-100 h-100 z-1",href:m,onLinkName:"itemClick",uid:u,onLinkExtras:{pr:l,...n},onLinkIndex:o,prefetch:!0,children:(0,s.jsx)(i.T,{children:e})})},I=({className:e=""})=>{const{item:n}=(0,b.A)();return n.checkStoreAvailabilityATC?(0,s.jsx)(l.Z,{as:"div",className:"mv2 f7 lh-title "+e,children:"Store availability varies"}):n.seeShippingEligibility?(0,s.jsx)(l.Z,{as:"div",className:"mv2 f7 lh-title "+e,children:"Shipping eligibility varies"}):null},P=({className:e="",item:n,index:a,children:i,catalogSellerId:l="",itemRef:t,onItemRef:o,...d})=>{const{0:m,1:u}=(0,c.useState)(n.image),f=(0,c.useRef)(null),{payload:h}=(0,r.Y)(f,n);return(0,c.useEffect)((()=>{t&&(t.current=f.current)}),[t]),(0,c.useEffect)((()=>{o&&f.current&&o({ref:f,item:n,index:a})}),[o,n,a]),(0,s.jsx)(b.h.Provider,{value:{item:n,index:a,itemImage:m,setItemImage:u,productAnalytics:h,catalogSellerId:l},children:(0,s.jsx)("div",{"data-item-id":n.id,"data-ad-component-type":null!=n&&n.sponsoredProduct?"wpa-tile":void 0,className:"sans-serif mid-gray relative flex flex-column w-100 "+e,ref:f,...d,children:i})})}},84016:function(e,n,a){a.d(n,{Vq:function(){return b},Vt:function(){return p}});var s=a(30567),i=a(83917),r=a(67219),l=a(85235),t=a(53813),c=a(49220),o=a(10856),d=a(37121),m=a(27596),u=a(35968),f=a(69357);function h(){const e=(0,f.Z)(["mutation clipRewardPromotionEngine($input:ClipRewardPromotionEngineInput!){clipRewardPromotionEngine(input:$input){success}}"]);return h=function(){return e},e}const x=(0,a(61984).P)(h());var v=a(18985),g=a(39956),j=a(52406);const b=(0,g.default)((()=>a.e(21590).then(a.bind(a,4660))),{ssr:!1,loadableGenerated:{webpack:()=>[4660],modules:["../../../../libs/ui/product-tile/src/lib/vertical/product-reward.tsx -> @walmart-web/ui-dialog"]}}),p=({offerId:e,selectionToken:n,offer:a,state:f,restriction:h,onToggleCheckbox:g=r.Z,showDetails:p,onClickDetails:N,onClipRewardSuccess:w=r.Z,onLinkExtras:y={}})=>{const{0:k,1:L}=(0,j.useState)(f),{0:I,1:P}=(0,j.useState)(!1),{signIn:E}=(0,i.Eu)(),{clipRewardPromotion:C,error:R}=(e=>{const n=(0,m.G)(),[a,{data:s,isError:i}]=(0,u.Db)((e=>n(x,e)),e);return{clipRewardPromotion:a,error:Boolean(null==s?void 0:s.errors)||i}})({onSuccess:(e,n)=>{w(n)}});(0,j.useEffect)((()=>{R&&P(!0)}),[R]);const S=()=>{P(!1)};return k===v.J.UNKNOWN?null:(0,s.jsxs)(s.Fragment,{children:[!R&&(0,s.jsx)("div",{className:"mt2",children:(0,s.jsxs)("div",{className:"pa1 br2 b--blue relative z-1 "+(k===v.J.CLIPPED||k===v.J.APPLIED?"bg-washed-blue":"b--dashed ba"),children:[(k===v.J.UNCLIPPED||k===v.J.CLIPPED)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex",children:[k===v.J.CLIPPED?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.J,{name:"Check",size:"medium"}),(0,s.jsx)("span",{className:"b",style:{marginLeft:5},children:"Reward added"})]}):(0,s.jsx)(t.Z,{label:a,onChange:()=>{L(v.J.CLIPPED),C({input:{cbOffer:e,selectionToken:n}}),g()},onLinkName:"addReward",onLinkExtras:y}),p&&(0,s.jsx)("div",{className:"pointer",style:{margin:"-2px 12px"},children:(0,s.jsx)(d.ZP,{onClick:N,onLinkName:"showRewardDetails",children:(0,s.jsx)(c.J,{name:"InfoCircle",size:"small"})})})]}),(0,s.jsx)("div",{className:"sans-serif gray f7 mt0",style:{lineHeight:"1",marginLeft:30},children:h})]}),(k===v.J.APPLIED||k===v.J.AVAILABLE)&&(0,s.jsx)("div",{className:"flex",children:k===v.J.APPLIED?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{src:"//i5.walmartimages.com/dfw/63fd9f59-3b59/07ba5c23-6913-4c2e-b697-0503ce79ef58/v1/money-circle-fill.svg",alt:"Reward Logo",preload:!1,width:16,height:16,"aria-hidden":!0}),(0,s.jsx)("span",{className:"f7",style:{marginLeft:5},children:"Reward applied"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.J,{name:"MoneyCircle",size:"medium",className:"blue"}),(0,s.jsx)("span",{className:"f6",style:{marginLeft:5,lineHeight:1.7},children:"Reward available"})]})}),k===v.J.UNLOCK&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.J,{name:"MoneyCircle",size:"medium",className:"blue"}),(0,s.jsx)("span",{className:"f6 mh2",children:"Unlock reward"}),(0,s.jsx)(d.ZP,{className:"f6 black underline pointer",onClick:()=>{E()},onLinkName:"signIn",children:"Sign in"})]})]})}),I&&(0,s.jsx)(b,{actions:(0,s.jsx)("div",{className:"center",children:(0,s.jsx)(l.Z,{className:"mb2",onClick:S,variant:"primary",size:"medium",onLinkName:"errorModalOk",children:"Ok"})}),isOpen:!0,onClose:S,size:"small",title:"Rewards",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"b",children:"Sorry! We were unable to add your reward."}),"We're working on fixing it. Please try again later."]})})]})}},48098:function(e,n,a){a.d(n,{h:function(){return i},A:function(){return r}});var s=a(52406);const i=s.createContext(null),r=()=>(0,s.useContext)(i)},45940:function(e,n,a){var s=a(30567),i=a(52406),r=a(94358),l=a.n(r),t=a(49220);n.Z=({className:e,size:n="small",value:a=0,showRatingNumber:r=!1,...c})=>{const o={"aria-hidden":!0,size:n,style:{fontSize:"small"===n?12:24}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:l()("black inline-flex",e),...c,children:[1,2,3,4,5].map((e=>a>=e-.25?(0,i.createElement)(t.J,{...o,key:e,name:"StarFill"}):a>=e-.75?(0,i.createElement)(t.J,{...o,key:e,name:"StarHalf"}):(0,i.createElement)(t.J,{...o,key:e,name:"Star"})))}),r&&a&&(0,s.jsx)("span",{className:"f7 rating-number",children:"("+a.toFixed(1)+")"})]})}}}]);