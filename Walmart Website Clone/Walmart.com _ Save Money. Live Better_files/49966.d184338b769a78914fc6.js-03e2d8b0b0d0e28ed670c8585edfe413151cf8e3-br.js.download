"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49966],{30906:function(t,e,i){i.d(e,{b:function(){return l}});var o,n,a=i(89899),s=i(10292),r=i(52406);const c=null==(o=(0,s.default)())||null==(n=o.publicRuntimeConfig)?void 0:n.moatIvt;function l(){const t=(0,a.yh)(),{0:e,1:i}=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t(c).then((()=>{i(!0)}))}),[t]),e}},22794:function(t,e,i){i.d(e,{H:function(){return c}});var o=i(95050),n=i(52406),a=i(82510),s=i(1005),r=i(47983);function c(t){const e=(0,n.useMemo)((()=>o.Y.uuids().includes(t.uuId)),[t.uuId]),i=(0,n.useMemo)((()=>(0,a.U2)("wm_client_ip")),[]),c=(0,n.useMemo)((()=>(0,a.U2)("wmlh")),[]);return(0,r.F)((()=>{o.Y.rendered(t)})),(0,n.useMemo)((()=>{const o=i===t.metaData.dfpParams.clientIp||c===t.metaData.dfpParams.wmlh;return(0,s.v)().displayCheckIp&&!o?"ip-mismatch":!(!(0,s.v)().displayPreviousRenderCheck||!e)&&"dup-render"}),[i,t.metaData.dfpParams.clientIp,c,t.metaData.dfpParams.wmlh,e])}},6023:function(t,e,i){i.d(e,{a:function(){return o}});const o=()=>{let t,e;return"undefined"!==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight),[t,e]}},90564:function(t,e,i){i.d(e,{r:function(){return Q}});var o=i(44351),n=i(72092),a=i(52406),s=i(18513);var r=t=>t?(t.forEach((t=>{clearTimeout(t)})),[]):[],c=i(82301),l=i.n(c);const u="viewabilityMRCTimeout";let d,m,T,h,f;!function(t){t.moat="moat",t.ias="ias",t.doubleverify="doubleverify"}(d||(d={})),function(t){t.AD_IMPRESSION="AD_IMPRESSION",t.CLICK="CLICK",t.TOUCH="TOUCH",t.MRC_VIEWABLE="MRC_VIEWABLE",t.UNLOAD="UNLOAD"}(m||(m={})),function(t){t.GROUPM_VIEWABLE="GROUPM_VIEWABLE",t.PERIODIC_UPDATE="AD_STATUS"}(T||(T={})),function(t){t.AD_IMPRESSION="adImpression",t.AD_VIEWABLE="adViewable",t.AD_TOUCH="adTouch",t.AD_CLICK="adClick",t.AD_REMOVE="adRemove"}(h||(h={})),function(t){t.AD_VIEWABLE_GM="adViewableGm",t.AD_STATUS="adStatus"}(f||(f={}));const w=.5,g=1e3;var p=(t,e)=>{let i=!1;return(...o)=>{i||(i=!0,setTimeout((()=>{t(...o),i=!1}),e))}};var C=(t=>(...e)=>{let i=[];const o=p((()=>{for(let e=0;e<i.length;e++)try{i[e]()}catch(t){0}}),t);return e.forEach((t=>{document.addEventListener(t,o)})),t=>(i.push(t),()=>{i=i.filter((e=>e!==t))})})(10)("visibilitychange");const b=(t,e)=>{let i=!1;const o=t.trackingState,n=t.commonTrackingTimeoutList.viewabilityMRCTimeout;n.length&&(t.commonTrackingTimeoutList.viewabilityMRCTimeout=r(n)),o.viewabilityMRC||(o.viewabilityMRC=!0,i=!0,t.beaconUtil.fire(m.MRC_VIEWABLE,h.AD_VIEWABLE)),i&&e(d.moat,o,"viewabilityMRC")};var I=(t,e,i)=>{const o=e.commonTrackingTimeoutList.viewabilityMRCTimeout;t.intersectionRatio>=w?o.push(window.setTimeout(b,g,e,i)):e.commonTrackingTimeoutList.viewabilityMRCTimeout=r(o)};var y=i(6023),P=i(82510),V=i(1005);const k=()=>{const t=(0,P.ej)("xpa");let e="";return t&&(0,V.v)().adsXpa.split(",").forEach((i=>{i&&t.includes(i)&&(e=i+":"+e)})),e};var M=i(10292);const S="viewabilityMRCStatusTimeout",E="groupMViewableTimeout",A="publicisFullInViewOTSTimeout",L=[5,10,15,30,60,120,180],v={[m.AD_IMPRESSION]:0,[m.CLICK]:2,[m.TOUCH]:23,[m.MRC_VIEWABLE]:5,[T.GROUPM_VIEWABLE]:9,[T.PERIODIC_UPDATE]:-1,[m.UNLOAD]:21},D=(t,e=0,i=0)=>{if(t.windowNotVisibleTime)return t.windowNotVisibleTime-e;const o=Date.now();let n=i;return n=o-e+n,t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;n-=e}})),n},O=(t,e=0)=>{const i=t.windowNotVisibleTime||Date.now();let o=i-e;const n=t.windowVisibleTimes.length,a=t.windowVisibleTimes[n-1]&&t.windowVisibleTimes[n-1].visible;return a&&e<a?i-a:(t.windowVisibleTimes.forEach((t=>{if(t.notVisible&&t.visible&&t.notVisible>e){const e=t.visible-t.notVisible;o-=e}})),o)},R=(t,e,i,o,n)=>{for(let a=0;a<t.length;a++){const s=t[a]-o/1e3;if(s>=0){e.trackingTimeoutList[i].push(setTimeout(n,1e3*s))}}},_=(t,e,i,o)=>{const n=D(t,e,i);return e?n:i||o},U=(t,e,i,o)=>{const n=O(t,e);return e&&n>i?n:i||o};var F=(t,e)=>{const i=Date.now(),o=t.trackingState;o.eventTypeCount[e]++;const n=Number(t.element.offsetHeight),a=Number(t.element.offsetWidth),[s,r]=(0,y.a)(),c=i-o.adLoadedTime,l=o.adLoadedTime,u=_(t,t.startMrcViewTime,o.totalMrcViewTime,0),d=_(t,t.startFullInViewOTS,o.fullInViewOTS,0),T=U(t,t.startFiftyPctContTime,o.totalFiftyPctContTime,0),h=U(t,t.startHundredPctContTime,o.totalHundredPctContTime,0),{adIds:f,adLocation:w,assetUrl:g,dfpTag:p,framework:C,pageType:b,random:I,adUnitId:P,categoryId:V}=t.getAdCustomInfo(),S=k(),E=null!=P?P:"0",A=null!=V?V:"0",L={ac:1,bq:0,fr:1,i:"production"===(0,M.default)().publicRuntimeConfig.profile?"WALMART_DISPLAY_S2S1":"WALMART_DISPLAY_S2SQA1",sl:1,e:v[e],ag:u,ak:g,d:f,gu:window.location.href,ia:T,gh:1,gf:d,h:n,ic:h,fq:1,de:I,qb:r,qa:s,t:l,m:c,q:o.eventTypeCount[e]-1,w:a,zMoatAdLocation:w,zMoatAdUnit1:p,zMoatAdUnit2:b,zMoatAdUnitId:E,zMoatCategoryId:A,zMoatXpa:S+"fw="+C,..."function"===typeof window.f?window.f():{}},D=(t,e,i=1)=>{e&&(L[t]=i)};return D("in",o.groupMViewable),D("gi",o.groupMViewable),D("as",o.viewabilityMRC),D("pd",o.publicisFullInViewOTS),D("c",t.touchOrClickTimeOffset,t.touchOrClickTimeOffset),D("tc",e===m.CLICK,o.eventTypeCount[e]),{payload:L}};var B=(t,e,i)=>{let o=!1;const n=e.trackingState,a=Date.now();if(n.totalFiftyPctContTime||(n.totalFiftyPctContTime=0),t.intersectionRatio>=w)e.startFiftyPctContTime||(e.startFiftyPctContTime=a);else if(e.startFiftyPctContTime){const t=O(e,e.startFiftyPctContTime);(!n.totalFiftyPctContTime||t>n.totalFiftyPctContTime)&&(n.totalFiftyPctContTime=t,o=!0),e.startFiftyPctContTime=0}else e.startFiftyPctContTime=0;o&&i(d.moat,n,"totalFiftyPctContTime")};var H=(t,e,i)=>{let o=!1;const n=e.trackingState;t.intersectionRatio>=1?e.startFullInViewOTS||(e.startFullInViewOTS=Date.now()):e.startFullInViewOTS?(n.fullInViewOTS=D(e,e.startFullInViewOTS,n.fullInViewOTS),o=!0,e.groupMTotalPeriodicTime=Date.now()-e.startFullInViewOTS+e.groupMTotalPeriodicTime,e.startFullInViewOTS=0):e.startFullInViewOTS=0,o&&i(d.moat,n,"fullInViewOTS")};const N=(t,e)=>{let i=!1;const o=t.trackingState,n=t.trackingTimeoutList.groupMViewableTimeout;n.length&&(t.trackingTimeoutList.groupMViewableTimeout=r(n)),o.groupMViewable||(o.groupMViewable=!0,i=!0,t.beaconUtil.fire(T.GROUPM_VIEWABLE,f.AD_VIEWABLE_GM)),i&&e(d.moat,o,"groupMViewable"),R(L,t,E,t.groupMTotalPeriodicTime,(()=>{t.beaconUtil.fire(T.GROUPM_VIEWABLE,f.AD_STATUS)}))};var W=(t,e,i)=>{const o=e.trackingState.isAdLarge?w:1,n=e.trackingTimeoutList.groupMViewableTimeout;t.intersectionRatio>=o?n.push(window.setTimeout(N,g,e,i)):e.trackingTimeoutList.groupMViewableTimeout=r(n)};var Z=(t,e,i)=>{let o=!1;const n=e.trackingState,a=Date.now();if(e.startHundredPctContTime||(e.startHundredPctContTime=0),t.intersectionRatio>=1)e.startHundredPctContTime||(e.startHundredPctContTime=a);else if(e.startHundredPctContTime){const t=O(e,e.startHundredPctContTime);(!n.totalHundredPctContTime||t>n.totalHundredPctContTime)&&(n.totalHundredPctContTime=t,o=!0),e.startHundredPctContTime=0}else e.startHundredPctContTime=0;o&&i(d.moat,n,"totalHundredPctContTime")};const z=(t,e)=>{const i=t.trackingState,o=t.trackingTimeoutList.publicisFullInViewOTSTimeout;o.length&&(t.trackingTimeoutList.publicisFullInViewOTSTimeout=r(o)),i.publicisFullInViewOTS=!0,e(d.moat,i,"publicisFullInViewOTS")};var G=(t,e,i)=>{const o=e.trackingState;if(!o.publicisFullInViewOTS){const n=e.trackingTimeoutList.publicisFullInViewOTSTimeout,a=o.isAdLarge?.3:1;t.intersectionRatio>=a?n.push(window.setTimeout(z,g,e,i)):e.trackingTimeoutList.publicisFullInViewOTSTimeout=r(n)}};var K=(t,e,i)=>{let o=!1;const n=e.trackingState;t.intersectionRatio>=w?e.startMrcViewTime||(e.startMrcViewTime=Date.now()):e.startMrcViewTime?(n.totalMrcViewTime=D(e,e.startMrcViewTime,n.totalMrcViewTime),o=!0,e.mrcTotalPeriodicTime=Date.now()-e.startMrcViewTime+e.mrcTotalPeriodicTime,e.startMrcViewTime=0):e.startMrcViewTime=0,o&&i(d.moat,n,"totalMrcViewTime")};const Y=t=>{const e=t.trackingTimeoutList.viewabilityMRCStatusTimeout;e.length&&(t.trackingTimeoutList.viewabilityMRCStatusTimeout=r(e)),R(L,t,S,t.mrcTotalPeriodicTime,(()=>{t.beaconUtil.fire(m.MRC_VIEWABLE,f.AD_STATUS)}))};var q=(t,e)=>{const i=e.trackingTimeoutList.viewabilityMRCStatusTimeout;t.intersectionRatio>=w?i.push(window.setTimeout(Y,g,e)):e.trackingTimeoutList.viewabilityMRCStatusTimeout=r(i)};class x extends class{constructor(t,e,i,o){(0,s.Z)(this,"windowVisibleTimes",[]),(0,s.Z)(this,"windowNotVisibleTime",null),(0,s.Z)(this,"touchOrClickTimeOffset",void 0),(0,s.Z)(this,"commonTrackingTimeoutList",{[u]:[]}),(0,s.Z)(this,"element",void 0),(0,s.Z)(this,"displayAdProps",void 0),(0,s.Z)(this,"trackingState",void 0),(0,s.Z)(this,"beaconUtil",void 0),(0,s.Z)(this,"onClickHandler",void 0),this.element=t,this.displayAdProps=e,this.trackingState=i,this.beaconUtil=o,this.trackingState.adLoadedTime=Date.now(),this.touchOrClickTimeOffset=0,this.trackingState.isAdLarge=this.adSizeCheck(),this.onClickHandler=this.onClick.bind(this)}onClick(){this.beaconUtil.fire(m.CLICK,h.AD_CLICK),this.element instanceof HTMLIFrameElement||this.element.removeEventListener("click",this.onClickHandler)}initialize(){this.beaconUtil.fire(m.AD_IMPRESSION,h.AD_IMPRESSION),l()((t=>{this.element.id===t.id&&"click"===t.type&&this.onClick()})),this.element instanceof HTMLIFrameElement||this.element.addEventListener("click",this.onClickHandler),C((()=>{"visible"!==document.visibilityState?this.windowNotVisibleTime=Date.now():"visible"===document.visibilityState&&(this.windowVisibleTimes.push({notVisible:this.windowNotVisibleTime,visible:Date.now()}),this.windowNotVisibleTime=null)}))}getBaseTrackers(){return[I]}adSizeCheck(){return Number(this.element.offsetHeight)*Number(this.element.offsetWidth)>=242500}unmount(){for(const t of Object.values(this.commonTrackingTimeoutList))r(t);this.beaconUtil.fire(m.UNLOAD,h.AD_REMOVE)}}{constructor(t,e,i,o){super(t,e,i,o),(0,s.Z)(this,"startMrcViewTime",0),(0,s.Z)(this,"startFiftyPctContTime",0),(0,s.Z)(this,"startHundredPctContTime",0),(0,s.Z)(this,"startFullInViewOTS",0),(0,s.Z)(this,"mrcTotalPeriodicTime",0),(0,s.Z)(this,"groupMTotalPeriodicTime",0),(0,s.Z)(this,"trackingTimeoutList",{[S]:[],[E]:[],[A]:[]}),o.attachTracker(this,d.moat),this.initialize()}initialize(){super.initialize()}getAdCustomInfo(){const{advertiserID:t,orderID:e,adUnitID:i,metaData:o}=this.displayAdProps,n=o.dfpResponse,a=o.dfpParams,s=n.googleLineitemId,r=n.googleCreativeId,c=a.dfpTag,l=a.targeting,u=l.location,d=l.categoryId,m=l.ptype,T=l.framework;return{adIds:t&&e&&s&&r?t+":"+e+":"+s+":"+r:void 0,adLocation:u,adUnitId:i,assetUrl:(({desktopImage:t,mobileImage:e,desktopLogo:i,mobileLogo:o,mainImage:n,logoImage:a,desktopBrandImage:s,mobileBrandImage:r,desktopBrandLogo:c,mobileBrandLogo:l})=>t||e||i||o||n||a||s||r||c||l)(this.displayAdProps),categoryId:d,dfpTag:c&&c.split("/")[2],framework:T,pageType:m,random:this.displayAdProps.metaData.dfpParams.targeting.sessId}}unmount(){for(const t of Object.values(this.trackingTimeoutList))r(t);super.unmount()}getTrackers(){return[H,G,q,K,B,W,Z]}getPayload(t){return F(this,t)}}var j=i(95050);class X{constructor(t,e,i,o){(0,s.Z)(this,"adUuid",void 0),(0,s.Z)(this,"commonDisplayAdPayload",void 0),(0,s.Z)(this,"trackingStates",void 0),(0,s.Z)(this,"onBeacon",void 0),(0,s.Z)(this,"trackers",void 0),this.adUuid=t,this.commonDisplayAdPayload=e,this.trackingStates=i,this.onBeacon=o,this.trackers=new Map}attachTracker(t,e){this.trackers.set(e,t)}payloadCheck(t,e){let i=!0;const o=Object.keys(t),a=[];for(let n=0;n<o.length;n++){const e=o[n];void 0===t[e]&&(a.push(e),i=!1)}return i||(0,n.L)({type:"BEACON_MISSING_KEY",payload:{action:e,missingKeys:a,payload:t}}),i}fire(t,e){const i={...this.commonDisplayAdPayload.metaData.beaconDebug||{},adSource:"S2S",ip:this.commonDisplayAdPayload.metaData.dfpParams.clientIp,s:this.adUuid,t:[],ignore:!1},o={};let n=!1;switch(t){case m.AD_IMPRESSION:case m.CLICK:case m.TOUCH:case m.MRC_VIEWABLE:case m.UNLOAD:this.trackers.forEach(((a,s)=>{const{payload:r}=a.getPayload(t);this.payloadCheck(r,e)&&(i.t.push(s),o[s]=r,n=!0)}));break;case T.GROUPM_VIEWABLE:case T.PERIODIC_UPDATE:{const a=this.trackers.get(d.moat);if(a){const{payload:s}=a.getPayload(t);this.payloadCheck(s,e)&&(i.t.push(d.moat),o[d.moat]=s,n=!0)}break}}if(!n)return;const a={mt:i,pl:o};j.Y.sendBeacon({context:"displayWlmt",action:"ads",name:e,payload:a}),this.onBeacon&&this.onBeacon(a)}}const Q=({elementRef:t,commonDisplayAdPayload:e,track3PEnable:i,onBeacon:s,dbg:r})=>{(({target:t,commonDisplayAdPayload:e,track3PEnable:i,onBeacon:s,dbg:r})=>{const c={rootMargin:"0px",threshold:[0,.3,w,1]},l=(0,a.useMemo)((()=>(t=>{const e={};return t&&(e.moat={adLoadedTime:0,isAdLarge:!1,viewabilityMRC:!1,groupMViewable:!1,totalMrcViewTime:0,totalFiftyPctContTime:0,totalHundredPctContTime:0,publicisFullInViewOTS:!1,fullInViewOTS:0,eventTypeCount:{AD_IMPRESSION:0,CLICK:0,MRC_VIEWABLE:0,GROUPM_VIEWABLE:0,PERIODIC_UPDATE:0,TOUCH:0,UNLOAD:0}}),e})(i)),[i]),{0:u,1:d}=(0,a.useState)(t.current);(0,a.useEffect)((()=>{d(t.current)}),[t,d]);const m=(0,a.useMemo)((()=>e.uuId||""),[e]),T=(0,a.useRef)(new X(m,e,l,s)),h=(0,a.useRef)(null);(0,a.useEffect)((()=>{i&&u&&!h.current&&(h.current=new x(u,e,l.moat,T.current))}),[e,u,i,l.moat]),(0,a.useEffect)((()=>()=>{h.current&&h.current.unmount()}),[]);const f=(0,a.useCallback)(((t,e,i)=>{(0,n.L)({payload:{state:e},type:"GLASS_3P_AD_UPDATE",meta:{stateChange:t+":"+i,id:m}})}),[m]),g=(0,a.useCallback)((t=>{if(h.current&&i){const e=h.current.getTrackers(),i=h.current.getBaseTrackers();e.forEach((e=>{e(t,h.current,f)})),i.forEach((e=>{e(t,h.current,f)}))}}),[i,f]);(0,o.P)(t,g,c,{dbg:!0,auxData:{adType:"display",displayAd:e,dbg:r}})})({commonDisplayAdPayload:e,target:t,track3PEnable:i,onBeacon:s,dbg:r})}}}]);